{
  "feature": "Time Travel - Historical Chart Viewing",
  "description": "Navigate through historical snapshots of dental charts to view changes over time",
  "location": "Chart header, available on all chart views",
  "component": "TimeTravelControls",
  "visualization": {
    "type": "timeline-scrubber",
    "position": "chart-header-right",
    "width": "400px"
  },
  "controls": {
    "dateSelector": {
      "type": "dropdown-with-calendar",
      "label": "View Chart As Of",
      "options": "List of available snapshots",
      "default": "Current (Latest)",
      "styling": {
        "border": "1px solid #E0E0E0",
        "borderRadius": "8px",
        "padding": "8px 16px",
        "backgroundColor": "#FFFFFF",
        "cursor": "pointer"
      }
    },
    "timelineSlider": {
      "type": "range-slider",
      "min": "earliest snapshot date",
      "max": "current date",
      "step": "1 day",
      "markers": "snapshot dates",
      "showTooltip": true,
      "tooltipFormat": "MMM DD, YYYY"
    },
    "navigationButtons": {
      "previous": {
        "icon": "chevron-left",
        "action": "goToPreviousSnapshot",
        "label": "Previous Exam",
        "disabled": "when at earliest snapshot"
      },
      "next": {
        "icon": "chevron-right",
        "action": "goToNextSnapshot",
        "label": "Next Exam",
        "disabled": "when at current/latest"
      },
      "current": {
        "icon": "refresh",
        "action": "returnToCurrent",
        "label": "Return to Current",
        "disabled": "when viewing current"
      }
    }
  },
  "snapshotData": {
    "description": "Snapshots are created automatically on specific events",
    "autoSnapshotTriggers": [
      "New examination completed",
      "Significant changes to multiple teeth",
      "Major treatment completed",
      "Periodontal examination completed"
    ],
    "manualSnapshot": {
      "action": "Create Snapshot",
      "requiresNote": true,
      "button": {
        "label": "Save Snapshot",
        "icon": "camera"
      }
    },
    "dataStructure": {
      "id": "uuid",
      "patientId": "uuid",
      "snapshotDate": "ISO timestamp",
      "chartData": "complete dental chart object",
      "triggerType": "enum: auto | manual",
      "triggerReason": "string",
      "note": "string",
      "examiner": "string",
      "comparisonMetrics": {
        "teethChanged": "number",
        "newPathologies": "number",
        "newRestorations": "number",
        "extractedTeeth": "number"
      }
    }
  },
  "historicalViewMode": {
    "indicator": {
      "type": "banner",
      "position": "top-of-chart",
      "backgroundColor": "#FFD700",
      "text": "Viewing historical chart from {date}",
      "icon": "clock-history",
      "dismissible": false,
      "action": {
        "label": "Return to Current",
        "onClick": "exitHistoricalMode"
      }
    },
    "restrictions": {
      "editing": "disabled",
      "adding": "disabled",
      "deleting": "disabled",
      "message": "Editing is disabled in historical view. Return to current view to make changes."
    },
    "visualization": {
      "overlayOpacity": 0.9,
      "watermark": "Historical View - {date}",
      "disabledCursor": "not-allowed"
    }
  },
  "comparisonMode": {
    "description": "Compare two time periods side-by-side",
    "activation": {
      "button": {
        "label": "Compare",
        "icon": "compare",
        "position": "next to date selector"
      }
    },
    "layout": {
      "type": "split-view",
      "orientation": "horizontal",
      "columns": [
        {
          "label": "Earlier - {date1}",
          "width": "50%",
          "data": "snapshot1"
        },
        {
          "label": "Later - {date2}",
          "width": "50%",
          "data": "snapshot2"
        }
      ],
      "synchronizedScrolling": true,
      "highlightDifferences": true
    },
    "differenceHighlighting": {
      "newRestoration": {
        "color": "#00C851",
        "border": "2px solid #00C851",
        "pulse": true
      },
      "newPathology": {
        "color": "#FF4444",
        "border": "2px solid #FF4444",
        "pulse": true
      },
      "statusChange": {
        "color": "#FFD700",
        "border": "2px solid #FFD700"
      },
      "extraction": {
        "color": "#FF4444",
        "opacity": 0.3,
        "strikethrough": true
      }
    },
    "changesSummary": {
      "position": "bottom-of-comparison",
      "type": "stats-cards",
      "metrics": [
        {
          "label": "New Restorations",
          "value": "count",
          "color": "#00C851"
        },
        {
          "label": "New Pathologies",
          "value": "count",
          "color": "#FF4444"
        },
        {
          "label": "Teeth Extracted",
          "value": "count",
          "color": "#FF4444"
        },
        {
          "label": "Treatment Completed",
          "value": "count",
          "color": "#00A3E0"
        }
      ]
    }
  },
  "snapshotList": {
    "view": "dropdown or modal",
    "sortOrder": "newest first",
    "itemTemplate": {
      "date": "MMM DD, YYYY - HH:mm",
      "examiner": "Dr. Name",
      "triggerReason": "Annual Exam | Treatment Complete | Manual",
      "note": "Optional note",
      "changesSummary": "X changes",
      "actions": [
        {
          "label": "View",
          "action": "loadSnapshot"
        },
        {
          "label": "Compare",
          "action": "compareSnapshot"
        },
        {
          "label": "Export",
          "action": "exportSnapshot"
        }
      ]
    }
  },
  "timeline": {
    "visualization": {
      "type": "horizontal-timeline",
      "height": "80px",
      "showMilestones": true
    },
    "milestones": {
      "examination": {
        "icon": "clipboard-check",
        "color": "#00A3E0",
        "size": "medium"
      },
      "treatment": {
        "icon": "medical-cross",
        "color": "#00C851",
        "size": "small"
      },
      "pathologyDetected": {
        "icon": "alert",
        "color": "#FF4444",
        "size": "small"
      },
      "extraction": {
        "icon": "tooth-x",
        "color": "#FF4444",
        "size": "medium"
      },
      "implant": {
        "icon": "implant",
        "color": "#9575CD",
        "size": "medium"
      }
    },
    "interactivity": {
      "clickMilestone": "Load that snapshot",
      "hoverMilestone": "Show tooltip with details",
      "dragSlider": "Scrub through time"
    }
  },
  "exportOptions": {
    "singleSnapshot": {
      "formats": ["PDF", "JSON", "Image"],
      "includeOptions": [
        "Chart visualization",
        "Treatment data",
        "Pathology data",
        "Notes"
      ]
    },
    "comparison": {
      "formats": ["PDF", "JSON"],
      "includeOptions": [
        "Side-by-side charts",
        "Changes summary",
        "Detailed change list"
      ]
    }
  },
  "stateManagement": {
    "store": "chartStore",
    "state": {
      "historicalMode": "boolean",
      "currentSnapshotId": "uuid | null",
      "selectedDate": "Date | null",
      "comparisonMode": "boolean",
      "comparisonSnapshot1": "uuid | null",
      "comparisonSnapshot2": "uuid | null",
      "availableSnapshots": "Snapshot[]"
    },
    "actions": [
      "fetchSnapshots",
      "loadSnapshot",
      "createSnapshot",
      "deleteSnapshot",
      "compareSnapshots",
      "exitHistoricalMode",
      "goToPreviousSnapshot",
      "goToNextSnapshot"
    ]
  },
  "userExperience": {
    "loadingState": {
      "message": "Loading historical chart...",
      "animation": "skeleton-loader"
    },
    "emptyState": {
      "message": "No historical snapshots available",
      "action": "Create your first snapshot to track changes over time"
    },
    "transitions": {
      "snapshotSwitch": "fade transition 300ms",
      "comparisonMode": "slide transition 400ms"
    }
  }
}

