{
  "feature": "Endodontic Tests",
  "description": "Pulp vitality and periapical testing interface for individual teeth",
  "location": "Tooth Detail Page - Endodontic Tab",
  "route": "/patients/:patientId/tooth/:toothNumber (Endodontic tab)",
  "purpose": "Assess pulp vitality and diagnose endodontic pathology",
  "tests": [
    {
      "id": "cold-test",
      "name": "Cold Test",
      "description": "Tests pulp response to cold stimulus",
      "method": "Apply cold stimulus (e.g., Endo-Ice, refrigerant spray) to tooth",
      "responses": [
        {
          "value": "normal",
          "label": "Normal",
          "description": "Responds normally to cold, sensation disappears when stimulus removed",
          "color": "#00C851",
          "interpretation": "Vital pulp"
        },
        {
          "value": "sensitive",
          "label": "Sensitive",
          "description": "Excessive or prolonged response to cold",
          "color": "#FFD700",
          "interpretation": "Reversible or irreversible pulpitis"
        },
        {
          "value": "no-response",
          "label": "No Response",
          "description": "No sensation to cold stimulus",
          "color": "#FF4444",
          "interpretation": "Necrotic pulp or heavily restored tooth"
        }
      ],
      "ui": {
        "type": "button-group",
        "layout": "horizontal",
        "required": false
      }
    },
    {
      "id": "heat-test",
      "name": "Heat Test",
      "description": "Tests pulp response to heat stimulus",
      "method": "Apply warm gutta-percha or hot water to tooth",
      "responses": [
        {
          "value": "normal",
          "label": "Normal",
          "description": "Responds normally to heat, sensation disappears when stimulus removed",
          "color": "#00C851",
          "interpretation": "Vital pulp"
        },
        {
          "value": "sensitive",
          "label": "Sensitive",
          "description": "Excessive or prolonged response to heat",
          "color": "#FFD700",
          "interpretation": "Irreversible pulpitis"
        },
        {
          "value": "no-response",
          "label": "No Response",
          "description": "No sensation to heat stimulus",
          "color": "#FF4444",
          "interpretation": "Necrotic pulp"
        }
      ],
      "ui": {
        "type": "button-group",
        "layout": "horizontal",
        "required": false
      }
    },
    {
      "id": "percussion-test",
      "name": "Percussion Test",
      "description": "Tests for periapical inflammation",
      "method": "Tap tooth axially with mirror handle",
      "responses": [
        {
          "value": "normal",
          "label": "Normal",
          "description": "No pain or discomfort on percussion",
          "color": "#00C851",
          "interpretation": "Healthy periapical tissues"
        },
        {
          "value": "sensitive",
          "label": "Sensitive",
          "description": "Mild discomfort on percussion",
          "color": "#FFD700",
          "interpretation": "Mild periapical inflammation"
        },
        {
          "value": "painful",
          "label": "Painful",
          "description": "Sharp pain on percussion",
          "color": "#FF4444",
          "interpretation": "Acute periapical inflammation or abscess"
        }
      ],
      "ui": {
        "type": "button-group",
        "layout": "horizontal",
        "required": false
      }
    },
    {
      "id": "palpation-test",
      "name": "Palpation Test",
      "description": "Tests for periapical and periradicular inflammation",
      "method": "Apply pressure to mucosa over tooth apex",
      "responses": [
        {
          "value": "normal",
          "label": "Normal",
          "description": "No pain or swelling on palpation",
          "color": "#00C851",
          "interpretation": "Healthy periapical tissues"
        },
        {
          "value": "sensitive",
          "label": "Sensitive",
          "description": "Mild tenderness on palpation",
          "color": "#FFD700",
          "interpretation": "Periapical inflammation"
        },
        {
          "value": "painful",
          "label": "Painful",
          "description": "Significant pain or swelling on palpation",
          "color": "#FF4444",
          "interpretation": "Acute periapical abscess"
        }
      ],
      "ui": {
        "type": "button-group",
        "layout": "horizontal",
        "required": false
      }
    },
    {
      "id": "electric-pulp-test",
      "name": "Electric Pulp Test (EPT)",
      "abbreviation": "EPT",
      "description": "Uses electrical current to test pulp vitality",
      "method": "Apply electric pulp tester to tooth, gradually increase current",
      "measurement": {
        "type": "number",
        "unit": "EPT value",
        "min": 0,
        "max": 10,
        "step": 0.1,
        "default": null
      },
      "interpretation": [
        {
          "range": "0-2",
          "label": "High Vitality",
          "description": "Responds at low current",
          "color": "#00C851"
        },
        {
          "range": "3-5",
          "label": "Normal Vitality",
          "description": "Responds at moderate current",
          "color": "#64B5F6"
        },
        {
          "range": "6-8",
          "label": "Reduced Vitality",
          "description": "Responds at high current",
          "color": "#FFD700"
        },
        {
          "range": "9-10 or no response",
          "label": "Necrotic",
          "description": "No response at maximum current",
          "color": "#FF4444"
        }
      ],
      "ui": {
        "type": "number-input-with-slider",
        "layout": "horizontal",
        "showInterpretation": true,
        "required": false
      }
    }
  ],
  "layout": {
    "type": "form-grid",
    "description": "Horizontal bar showing all tests side-by-side",
    "topBar": {
      "display": "flex",
      "gap": "16px",
      "padding": "24px",
      "backgroundColor": "#F5F5F5",
      "borderRadius": "8px"
    },
    "testCard": {
      "flex": 1,
      "padding": "16px",
      "backgroundColor": "#FFFFFF",
      "borderRadius": "8px",
      "border": "1px solid #E0E0E0"
    }
  },
  "rootCanalSection": {
    "title": "Root Canal Treatment",
    "position": "below endodontic tests",
    "checkbox": {
      "label": "Has Root Canal Treatment",
      "field": "endodontic.hasRootCanal",
      "default": false
    },
    "conditionalFields": {
      "showWhen": "endodontic.hasRootCanal === true",
      "fields": [
        {
          "name": "treatmentDate",
          "label": "Treatment Date",
          "type": "date",
          "required": true
        },
        {
          "name": "numberOfCanals",
          "label": "Number of Canals",
          "type": "number",
          "min": 1,
          "max": 5,
          "default": 1
        },
        {
          "name": "obturationMaterial",
          "label": "Obturation Material",
          "type": "select",
          "options": ["Gutta-percha", "Resin-based", "Other"]
        },
        {
          "name": "quality",
          "label": "Quality of Obturation",
          "type": "select",
          "options": ["Adequate", "Overfilled", "Underfilled", "Voids present"]
        },
        {
          "name": "apicoectomy",
          "label": "Apicoectomy Performed",
          "type": "checkbox"
        },
        {
          "name": "notes",
          "label": "Notes",
          "type": "textarea",
          "rows": 4,
          "placeholder": "Treatment details, complications, follow-up..."
        }
      ]
    },
    "styling": {
      "marginTop": "24px",
      "padding": "24px",
      "backgroundColor": "#FFFFFF",
      "borderRadius": "8px",
      "border": "1px solid #E0E0E0"
    }
  },
  "visualRepresentation": {
    "toothView": {
      "description": "Show root canal treatment on tooth visualization",
      "display": "Lines through root canals on lingual view",
      "color": "#FF9800",
      "visibility": "Controlled by 'Endo' toggle"
    },
    "chartView": {
      "description": "Indicate root canal on main chart",
      "method": "Line through roots or special icon",
      "color": "#FF9800"
    }
  },
  "testProtocol": {
    "order": [
      "Inspect visually",
      "Percussion test",
      "Palpation test",
      "Cold test",
      "Heat test (if needed)",
      "Electric pulp test (if needed)"
    ],
    "notes": [
      "Always test control tooth (adjacent healthy tooth) first",
      "Isolate and dry tooth before testing",
      "Compare responses bilaterally",
      "Record baseline response from control tooth",
      "Consider false positives/negatives"
    ],
    "contraindications": [
      "EPT: Patients with pacemakers",
      "EPT: Teeth with large metallic restorations",
      "Cold test: Cracked teeth (may give false negative)"
    ]
  },
  "interpretation": {
    "vitalPulp": {
      "findings": [
        "Normal response to cold and heat",
        "Minimal sensitivity to percussion/palpation",
        "EPT 0-5"
      ],
      "treatment": "None, monitor"
    },
    "reversiblePulpitis": {
      "findings": [
        "Sensitive to cold (sharp, short-lasting pain)",
        "Normal response to heat",
        "Minimal percussion sensitivity",
        "EPT normal"
      ],
      "treatment": "Remove irritant, restore tooth"
    },
    "irreversiblePulpitis": {
      "findings": [
        "Severe, prolonged pain to cold/heat",
        "Pain lingers after stimulus removed",
        "Possible percussion sensitivity",
        "EPT may be elevated"
      ],
      "treatment": "Root canal therapy"
    },
    "necroticPulp": {
      "findings": [
        "No response to thermal tests",
        "No response to EPT (or only at maximum)",
        "Possible percussion/palpation sensitivity"
      ],
      "treatment": "Root canal therapy"
    },
    "acuteApicalAbscess": {
      "findings": [
        "No thermal response (necrotic)",
        "Severe percussion sensitivity",
        "Painful palpation, possible swelling"
      ],
      "treatment": "Emergency root canal or extraction"
    }
  },
  "dataModel": {
    "endodontic": {
      "tests": {
        "cold": "enum: normal | sensitive | no-response | null",
        "heat": "enum: normal | sensitive | no-response | null",
        "percussion": "enum: normal | sensitive | painful | null",
        "palpation": "enum: normal | sensitive | painful | null",
        "electricity": "number (0-10) | null"
      },
      "hasRootCanal": "boolean",
      "rootCanalTreatment": {
        "treatmentDate": "ISO date",
        "numberOfCanals": "number",
        "obturationMaterial": "string",
        "quality": "string",
        "apicoectomy": "boolean",
        "notes": "string"
      },
      "lastTestDate": "ISO timestamp",
      "diagnosis": "string (optional)",
      "recommendedTreatment": "string (optional)"
    }
  },
  "actions": {
    "primary": [
      {
        "label": "Save Test Results",
        "action": "saveEndodonticData",
        "color": "#00A3E0"
      }
    ],
    "secondary": [
      {
        "label": "Clear All Tests",
        "action": "clearTests",
        "confirmation": true
      },
      {
        "label": "Add to Treatment Plan",
        "action": "addRootCanalToTreatmentPlan",
        "conditional": "if diagnosis indicates RCT needed"
      }
    ]
  },
  "styling": {
    "testButton": {
      "padding": "12px 20px",
      "border": "2px solid #E0E0E0",
      "borderRadius": "8px",
      "backgroundColor": "#FFFFFF",
      "cursor": "pointer",
      "fontSize": "14px",
      "fontWeight": "500",
      "transition": "all 0.2s",
      "display": "flex",
      "flexDirection": "column",
      "alignItems": "center",
      "gap": "8px"
    },
    "selectedButton": {
      "borderColor": "response.color",
      "backgroundColor": "response.color + '10'",
      "color": "response.color"
    },
    "testLabel": {
      "fontSize": "12px",
      "fontWeight": "600",
      "color": "#424242",
      "marginBottom": "8px",
      "display": "block"
    }
  }
}

