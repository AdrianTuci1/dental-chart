{
  "route": "/patients/:patientId/report",
  "component": "PatientReportPage",
  "description": "Report generation and viewing interface for patient dental records",
  "layout": {
    "type": "patient-layout-with-sidebar",
    "showGlobalSidebar": true,
    "showPatientHeader": true
  },
  "components": [
    {
      "name": "ReportTypeSelector",
      "type": "card-grid",
      "description": "Selection of available report types",
      "styling": {
        "display": "grid",
        "gridTemplateColumns": "repeat(auto-fill, minmax(280px, 1fr))",
        "gap": "24px",
        "marginBottom": "32px"
      },
      "reportTypes": [
        {
          "id": "comprehensive-exam",
          "title": "Comprehensive Examination",
          "description": "Full dental examination report including all findings",
          "icon": "clipboard-check",
          "color": "#00A3E0"
        },
        {
          "id": "treatment-plan",
          "title": "Treatment Plan",
          "description": "Detailed treatment plan with cost estimates",
          "icon": "calendar-check",
          "color": "#64B5F6"
        },
        {
          "id": "periodontal-chart",
          "title": "Periodontal Chart",
          "description": "Complete periodontal examination data",
          "icon": "chart-line",
          "color": "#9575CD"
        },
        {
          "id": "progress-report",
          "title": "Progress Report",
          "description": "Treatment progress and outcomes",
          "icon": "trending-up",
          "color": "#00C851"
        },
        {
          "id": "insurance-claim",
          "title": "Insurance Claim",
          "description": "Insurance claim form with treatment codes",
          "icon": "file-text",
          "color": "#FFD700"
        },
        {
          "id": "referral-letter",
          "title": "Referral Letter",
          "description": "Referral to specialist with case details",
          "icon": "share",
          "color": "#FF9800"
        }
      ]
    },
    {
      "name": "ReportPreview",
      "type": "document-viewer",
      "description": "Live preview of the generated report",
      "conditional": "Show when a report type is selected",
      "styling": {
        "backgroundColor": "#FFFFFF",
        "borderRadius": "8px",
        "padding": "40px",
        "boxShadow": "0 1px 3px rgba(0,0,0,0.12)",
        "maxWidth": "8.5in",
        "margin": "0 auto",
        "minHeight": "11in"
      },
      "toolbar": {
        "position": "sticky-top",
        "actions": [
          {
            "icon": "print",
            "label": "Print",
            "action": "printReport"
          },
          {
            "icon": "download",
            "label": "Download PDF",
            "action": "downloadPDF"
          },
          {
            "icon": "email",
            "label": "Email",
            "action": "emailReport"
          },
          {
            "icon": "edit",
            "label": "Customize",
            "action": "openCustomizeModal"
          }
        ]
      }
    }
  ],
  "reportTemplates": {
    "comprehensiveExam": {
      "sections": [
        {
          "title": "Patient Information",
          "content": ["name", "dateOfBirth", "examDate", "examiner"]
        },
        {
          "title": "Chief Complaint",
          "content": "free-text"
        },
        {
          "title": "Medical History",
          "content": ["allergies", "medications", "conditions"]
        },
        {
          "title": "Extraoral Examination",
          "content": "softTissue.extraoralExam"
        },
        {
          "title": "Intraoral Examination",
          "content": "softTissue.intraoralExam"
        },
        {
          "title": "Periodontal Assessment",
          "content": ["bpe", "plaqueIndex", "bleedingIndex"]
        },
        {
          "title": "Dental Chart",
          "content": "chart-diagram",
          "includeLegend": true
        },
        {
          "title": "Findings",
          "content": ["pathology-list", "restoration-list"]
        },
        {
          "title": "Diagnosis",
          "content": "free-text"
        },
        {
          "title": "Treatment Plan",
          "content": "treatment-plan-table"
        },
        {
          "title": "Prognosis",
          "content": "free-text"
        }
      ]
    },
    "treatmentPlan": {
      "sections": [
        {
          "title": "Patient Information",
          "content": ["name", "dateOfBirth", "planDate"]
        },
        {
          "title": "Treatment Plan Summary",
          "content": "treatment-plan-table-detailed"
        },
        {
          "title": "Cost Breakdown",
          "content": "cost-table"
        },
        {
          "title": "Insurance Coverage",
          "content": "insurance-estimate"
        },
        {
          "title": "Payment Options",
          "content": "payment-schedule"
        }
      ]
    },
    "periodontalChart": {
      "sections": [
        {
          "title": "Patient Information",
          "content": ["name", "dateOfBirth", "examDate"]
        },
        {
          "title": "Periodontal Chart",
          "content": "full-periodontal-diagram",
          "includeAllMeasurements": true
        },
        {
          "title": "Basic Periodontal Examination",
          "content": "bpe-grid"
        },
        {
          "title": "Oral Health Indices",
          "content": ["plaqueIndex", "bleedingIndex", "halitosis"]
        },
        {
          "title": "Periodontal Diagnosis",
          "content": "free-text"
        },
        {
          "title": "Periodontal Treatment Plan",
          "content": "periodontal-treatment-list"
        }
      ]
    }
  },
  "customization": {
    "options": [
      {
        "name": "includeLogo",
        "label": "Include Practice Logo",
        "type": "checkbox",
        "default": true
      },
      {
        "name": "includeSignature",
        "label": "Include Signature",
        "type": "checkbox",
        "default": true
      },
      {
        "name": "includeImages",
        "label": "Include Clinical Images",
        "type": "checkbox",
        "default": false
      },
      {
        "name": "dateFormat",
        "label": "Date Format",
        "type": "select",
        "options": ["MM/DD/YYYY", "DD/MM/YYYY", "YYYY-MM-DD"],
        "default": "MM/DD/YYYY"
      },
      {
        "name": "paperSize",
        "label": "Paper Size",
        "type": "select",
        "options": ["Letter", "A4"],
        "default": "Letter"
      }
    ]
  },
  "export": {
    "pdf": {
      "library": "jspdf or react-pdf",
      "options": {
        "format": "letter or a4",
        "orientation": "portrait",
        "margins": {
          "top": "1in",
          "right": "0.75in",
          "bottom": "1in",
          "left": "0.75in"
        }
      }
    },
    "print": {
      "useNativePrint": true,
      "printStyles": "separate print.css"
    },
    "email": {
      "modal": {
        "fields": [
          {
            "name": "to",
            "label": "To",
            "type": "email",
            "default": "patient.email"
          },
          {
            "name": "subject",
            "label": "Subject",
            "type": "text",
            "default": "Your Dental Report from [Practice Name]"
          },
          {
            "name": "message",
            "label": "Message",
            "type": "textarea",
            "rows": 6
          }
        ]
      }
    }
  },
  "stateManagement": {
    "store": "reportStore",
    "state": {
      "selectedReportType": "string | null",
      "reportData": "object",
      "customizationOptions": "object",
      "isGenerating": "boolean"
    },
    "actions": [
      "selectReportType",
      "generateReport",
      "customizeReport",
      "printReport",
      "downloadPDF",
      "emailReport"
    ]
  }
}

